{
    "name": "eclipse-s-core-etas",
    "build": {
        "dockerfile": "Dockerfile",
        "args": {
            "USERNAME": "${localEnv:USER}"
        }
    },
    "remoteUser": "${localEnv:USER}",
    "runArgs": [
        "--add-host=host.docker.internal:host-gateway"
    ],
    "mounts": [
        {
            "source": "/usr/local/share/ca-certificates/",
            "target": "/usr/local/share/ca-certificates/",
            "type": "bind"
        },
        {
            "source": "/home/${localEnv:USER}/QNX8KIT/QNX8LINUX/installation.tgz",
            "target": "/home/${localEnv:USER}/QNX8KIT/QNX8LINUX/installation.tgz",
            "type": "bind"
        },
        {
            "source": "/home/${localEnv:USER}/.qnx/license/licenses",
            "target": "/opt/score_qnx/license/licenses",
            "type": "bind"
        }
    ],
    "onCreateCommand": {
        "update certificates": "sudo apt update && sudo apt install -y --no-install-recommends ca-certificates-java openjdk-21-jdk-headless && sudo update-ca-certificates",
        "bazel use system trust store": "echo 'startup --host_jvm_args=-Djavax.net.ssl.trustStore=/etc/ssl/certs/java/cacerts --host_jvm_args=-Djavax.net.ssl.trustStorePassword=changeit' | sudo tee --append /etc/bazel.bazelrc"
    }
}
